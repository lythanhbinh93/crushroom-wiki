<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng k√Ω l·ªãch l√†m - Crush Room Wiki</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üíé</span>
                    <span class="logo-text">Crush Room</span>
                </div>
                <span class="wiki-badge">Wiki</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="../index.html" class="nav-item">
                    <span class="nav-icon">üè†</span>
                    <span>Trang ch·ªß</span>
                </a>
                
                <!-- TH√äM class nav-schedule-link ƒë·ªÉ c√≤n ·∫©n b·∫±ng JS -->
                <a href="schedule.html" class="nav-item active nav-schedule-link">
                    <span class="nav-icon">üìÖ</span>
                    <span>ƒêƒÉng k√Ω l·ªãch l√†m</span>
                </a>
                
                <div class="nav-group">
                    <div class="nav-group-header">
                        <span class="nav-icon">üí¨</span>
                        <span>Customer Service</span>
                        <span class="nav-arrow">‚ñº</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="cs/library.html" class="nav-subitem">Th∆∞ vi·ªán h·ªçc t·∫≠p</a>
                        <a href="cs/quiz.html" class="nav-subitem">B√†i ki·ªÉm tra</a>
                    </div>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-header">
                        <span class="nav-icon">üì¢</span>
                        <span>Marketing</span>
                        <span class="nav-arrow">‚ñº</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="marketing/library.html" class="nav-subitem">Th∆∞ vi·ªán h·ªçc t·∫≠p</a>
                        <a href="marketing/quiz.html" class="nav-subitem">B√†i ki·ªÉm tra</a>
                    </div>
                </div>
                
                <div class="nav-group">
                    <div class="nav-group-header">
                        <span class="nav-icon">‚ö°</span>
                        <span>Laser</span>
                        <span class="nav-arrow">‚ñº</span>
                    </div>
                    <div class="nav-group-items">
                        <a href="laser/guide.html" class="nav-subitem">H∆∞·ªõng d·∫´n kh·∫Øc Laser</a>
                        <a href="laser/lightburn.html" class="nav-subitem">Th√¥ng s·ªë Lightburn</a>
                    </div>
                </div>
            </nav>
            
            <!-- User Info -->
            <div class="user-info"></div>
            
            <div class="sidebar-footer">
                <p>¬© 2025 Crush Room</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="breadcrumb">
                <a href="../index.html">Trang ch·ªß</a>
                <span>/</span>
                <span>ƒêƒÉng k√Ω l·ªãch l√†m</span>
            </div>
            
            <header class="page-header">
                <div class="page-header-content">
                    <h1>üìÖ ƒêƒÉng k√Ω l·ªãch l√†m</h1>
                    <p class="header-subtitle">H∆∞·ªõng d·∫´n ƒëƒÉng k√Ω ca l√†m vi·ªác h√†ng tu·∫ßn v√† xem l·ªãch ch·ªët c·ªßa team</p>
                </div>
            </header>

            <!-- ==== L·ªäCH L√ÄM ƒê√É CH·ªêT TU·∫¶N N√ÄY (∆ØU TI√äN HI·ªÇN TH·ªä ƒê·∫¶U) ==== -->
            <section class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number">1</span>
                        <h2>L·ªãch l√†m ƒë√£ ch·ªët tu·∫ßn n√†y</h2>
                    </div>
                </div>
                <p class="section-description">
                    Khi tr·∫°ng th√°i tu·∫ßn l√† <strong>ƒê√É CH·ªêT</strong>, ƒë√¢y l√† l·ªãch l√†m ch√≠nh th·ª©c c·ªßa b·∫°n trong tu·∫ßn ƒë√≥.
                </p>

                <div id="final-schedule-status" class="status-badge-container"></div>

                <div id="final-schedule-wrapper" class="table-wrapper" style="display:none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ng√†y</th>
                                <th>Ca l√†m c·ªßa b·∫°n</th>
                            </tr>
                        </thead>
                        <tbody id="final-schedule-body">
                            <!-- JS render -->
                        </tbody>
                    </table>
                </div>

                <div id="final-schedule-summary" class="info-box" style="display:none;">
                    <span class="info-icon">‚ÑπÔ∏è</span>
                    <p id="final-schedule-summary-text"></p>
                </div>
            </section>

            <!-- ==== L·ªäCH L√ÄM C·ª¶A C√îNG TY TU·∫¶N N√ÄY (PART-TIME) ==== -->
            <section class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number" style="background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);">2</span>
                        <h2>L·ªãch l√†m c·ªßa c√¥ng ty tu·∫ßn n√†y (Part-time)</h2>
                    </div>

                    <!-- Team Filter Toggle -->
                    <div class="view-mode-toggle">
                        <button id="filter-all-btn" class="view-toggle-btn active">
                            <span class="btn-icon">üè¢</span>
                            T·∫•t c·∫£
                        </button>
                        <button id="filter-cs-btn" class="view-toggle-btn">
                            <span class="btn-icon">üí¨</span>
                            CS
                        </button>
                        <button id="filter-mo-btn" class="view-toggle-btn">
                            <span class="btn-icon">üì¢</span>
                            MO
                        </button>
                    </div>
                </div>
                <p class="section-description">
                    Xem l·ªãch l√†m ƒë√£ ch·ªët c·ªßa t·∫•t c·∫£ nh√¢n vi√™n part-time (c·∫£ CS v√† MO) ƒë·ªÉ d·ªÖ d√†ng ph·ªëi h·ª£p v√† li√™n h·ªá ƒë·ªïi ca.
                </p>

                <div id="team-schedule-status" class="status-badge-container">
                    <!-- JS hi·ªÉn th·ªã: tr·∫°ng th√°i l·ªãch ch·ªët -->
                </div>

                <div id="team-schedule-wrapper" class="table-wrapper" style="display:none;">
                    <table class="data-table schedule-table">
                        <thead>
                            <tr id="team-schedule-head-row">
                                <!-- JS render header -->
                            </tr>
                        </thead>
                        <tbody id="team-schedule-body">
                            <!-- JS render body -->
                        </tbody>
                    </table>
                </div>

                <div id="team-schedule-empty" class="empty-state" style="display:none;">
                    <span class="empty-icon">üì≠</span>
                    <p>Tu·∫ßn n√†y ch∆∞a c√≥ l·ªãch ch√≠nh th·ª©c n√†o ƒë∆∞·ª£c x·∫øp</p>
                </div>
            </section>

            <!-- ==== QUY TR√åNH ƒêƒÇNG K√ù & ƒêƒÇNG K√ù L·ªäCH R·∫¢NH ==== -->
            <section id="availability-section" class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number">3</span>
                        <h2>ƒêƒÉng k√Ω l·ªãch r·∫£nh</h2>
                    </div>
                </div>
                <p class="section-description" id="team-label">
                    Ch·ªçn tu·∫ßn v√† tick nh·ªØng ca b·∫°n c√≥ th·ªÉ l√†m. Leader s·∫Ω ph√¢n ca d·ª±a tr√™n ƒëƒÉng k√Ω n√†y.
                </p>

                <div class="filter-controls">
                    <div class="form-group">
                        <label for="week-start-input" class="form-label">Tu·∫ßn b·∫Øt ƒë·∫ßu</label>
                        <input type="date" id="week-start-input" class="form-input" />
                    </div>
                    <div class="form-group">
                        <button id="load-week-btn" class="btn btn-primary">
                            <span class="btn-icon">üì•</span>
                            T·∫£i ƒëƒÉng k√Ω
                        </button>
                    </div>
                </div>

                <div id="schedule-message" class="alert-message"></div>

                <div class="table-wrapper">
                    <table class="data-table schedule-table">
                        <thead>
                            <tr>
                                <th>Ca / Ng√†y</th>
                                <th>Th·ª© 2</th>
                                <th>Th·ª© 3</th>
                                <th>Th·ª© 4</th>
                                <th>Th·ª© 5</th>
                                <th>Th·ª© 6</th>
                                <th>Th·ª© 7</th>
                                <th>Ch·ªß nh·∫≠t</th>
                            </tr>
                        </thead>
                        <tbody id="availability-body">
                            <!-- JS render -->
                        </tbody>
                    </table>
                </div>

                <div class="schedule-actions" style="margin-top:20px; display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
                    <button id="save-availability-btn" class="btn btn-primary">
                        <span class="btn-icon">üíæ</span>
                        L∆∞u l·ªãch r·∫£nh
                    </button>
                </div>

                <div class="info-box" style="margin-top:16px;">
                    <span class="info-icon">üí°</span>
                    <p>N·∫øu h·ªá th·ªëng g·∫∑p l·ªói, t·∫°m th·ªùi c√≥ th·ªÉ b√°o l·ªãch qua qu·∫£n l√Ω ho·∫∑c Google Form nh∆∞ tr∆∞·ªõc.</p>
                </div>
            </section>

            <!-- ==== H∆Ø·ªöNG D·∫™N & QUY ƒê·ªäNH ==== -->
            <section class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number">4</span>
                        <h2>H∆∞·ªõng d·∫´n & Quy ƒë·ªãnh</h2>
                    </div>
                </div>

                <h3>üìÖ Th·ªùi gian ƒëƒÉng k√Ω</h3>
                <p>ƒêƒÉng k√Ω l·ªãch l√†m cho tu·∫ßn k·∫ø ti·∫øp ƒë∆∞·ª£c th·ª±c hi·ªán v√†o:</p>
                <ul>
                    <li><strong>Th·ª© 5 h√†ng tu·∫ßn:</strong> M·ªü form ƒëƒÉng k√Ω</li>
                    <li><strong>Th·ª© 6 - 12:00:</strong> Deadline ƒëƒÉng k√Ω</li>
                    <li><strong>Th·ª© 6 - 18:00:</strong> C√¥ng b·ªë l·ªãch ch√≠nh th·ª©c</li>
                </ul>

                <h3>‚è∞ C√°c ca l√†m vi·ªác</h3>
                <div class="table-wrapper">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Ca</th>
                                <th>Th·ªùi gian</th>
                                <th>Ghi ch√∫</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ca s√°ng</td>
                                <td>08:00 - 12:00</td>
                                <td>4 ti·∫øng</td>
                            </tr>
                            <tr>
                                <td>Ca chi·ªÅu</td>
                                <td>13:00 - 17:00</td>
                                <td>4 ti·∫øng</td>
                            </tr>
                            <tr>
                                <td>Ca t·ªëi</td>
                                <td>17:00 - 21:00</td>
                                <td>4 ti·∫øng</td>
                            </tr>
                            <tr>
                                <td>Ca full</td>
                                <td>08:00 - 17:00</td>
                                <td>8 ti·∫øng (ngh·ªâ tr∆∞a 1h)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>‚úÖ Y√™u c·∫ßu t·ªëi thi·ªÉu</h3>
                <ul>
                    <li>Fulltime: T·ªëi thi·ªÉu <strong>40 gi·ªù/tu·∫ßn</strong></li>
                    <li>Part-time: T·ªëi thi·ªÉu <strong>20 gi·ªù/tu·∫ßn</strong></li>
                    <li>Kh√¥ng ƒëƒÉng k√Ω qu√° <strong>10 ti·∫øng/ng√†y</strong></li>
                </ul>
            </section>

            <section class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number">5</span>
                        <h2>Quy ƒë·ªãnh ƒë·ªïi ca / Ngh·ªâ ph√©p</h2>
                    </div>
                </div>

                <h3>üîÑ ƒê·ªïi ca</h3>
                <ul>
                    <li>T·ª± t√¨m ng∆∞·ªùi thay ca v√† th√¥ng b√°o cho qu·∫£n l√Ω</li>
                    <li>B√°o tr∆∞·ªõc t·ªëi thi·ªÉu <strong>24 gi·ªù</strong></li>
                    <li>X√°c nh·∫≠n ƒë·ªïi ca qua group Zalo team</li>
                </ul>

                <h3>üèñÔ∏è Ngh·ªâ ph√©p</h3>
                <ul>
                    <li>Ngh·ªâ c√≥ k·∫ø ho·∫°ch: B√°o tr∆∞·ªõc <strong>3 ng√†y</strong></li>
                    <li>Ngh·ªâ ƒë·ªôt xu·∫•t (·ªëm): B√°o ngay khi bi·∫øt, c√≥ gi·∫•y x√°c nh·∫≠n n·∫øu ngh·ªâ > 1 ng√†y</li>
                    <li>Kh√¥ng b√°o + Kh√¥ng l√Ω do = <strong>Ngh·ªâ kh√¥ng ph√©p</strong></li>
                </ul>

                <div class="info-box">
                    <span class="info-icon">‚ö†Ô∏è</span>
                    <p><strong>L∆∞u √Ω:</strong> ƒê·ªïi ca v√† ngh·ªâ ph√©p ƒë·ªôt xu·∫•t ·∫£nh h∆∞·ªüng ƒë·∫øn to√†n team. H√£y s·∫Øp x·∫øp h·ª£p l√Ω v√† th√¥ng b√°o s·ªõm nh·∫•t c√≥ th·ªÉ.</p>
                </div>
            </section>

            <section class="content-section schedule-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <span class="section-number">6</span>
                        <h2>Li√™n h·ªá h·ªó tr·ª£</h2>
                    </div>
                </div>
                <p>N·∫øu c√≥ v·∫•n ƒë·ªÅ v·ªÅ l·ªãch l√†m, li√™n h·ªá:</p>
                <ul>
                    <li>üì± Zalo: [S·ªë ƒëi·ªán tho·∫°i qu·∫£n l√Ω]</li>
                    <li>üí¨ Nh·∫Øn tr·ª±c ti·∫øp trong group Team</li>
                </ul>
            </section>

        </main>
    </div>

    <script src="../js/auth.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/schedule.js"></script>
    <script>
        // ·∫®n menu "ƒêƒÉng k√Ω l·ªãch l√†m" cho nh√¢n vi√™n fulltime kh√¥ng thu·ªôc team CS
        function hideScheduleNavForFulltimeNonCS() {
            const user = Auth.getCurrentUser();
            if (!user) return;

            const employmentType = (user.employmentType || 'parttime').toLowerCase();
            const isFulltime = employmentType === 'fulltime';
            const isCS = user.permissions && user.permissions.cs;

            // Fulltime v√† KH√îNG c√≥ quy·ªÅn CS -> ·∫©n menu
            if (isFulltime && !isCS) {
                const links = document.querySelectorAll('.nav-schedule-link');
                links.forEach(link => {
                    link.style.display = 'none';
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (!Auth.requireAuth()) return;
            Auth.renderAuthUI();

            // G·ªçi h√†m ·∫©n menu cho fulltime kh√¥ng thu·ªôc team CS
            hideScheduleNavForFulltimeNonCS();

            if (window.SchedulePage && typeof SchedulePage.init === 'function') {
                SchedulePage.init();
            }
        });
    </script>
</body>
</html>
