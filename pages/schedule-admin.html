<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qu·∫£n l√Ω l·ªãch l√†m - Crush Room Wiki</title>
  <link rel="stylesheet" href="../css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <span class="logo-icon">üíé</span>
          <span class="logo-text">Crush Room</span>
        </div>
        <span class="wiki-badge">Wiki</span>
      </div>

      <nav class="sidebar-nav">
        <a href="../index.html" class="nav-item">
          <span class="nav-icon">üè†</span>
          <span>Trang ch·ªß</span>
        </a>

        <a href="schedule.html" class="nav-item">
          <span class="nav-icon">üìÖ</span>
          <span>ƒêƒÉng k√Ω l·ªãch l√†m</span>
        </a>

        <a href="schedule-admin.html" class="nav-item active" data-admin-only>
          <span class="nav-icon">üß©</span>
          <span>Qu·∫£n l√Ω l·ªãch l√†m</span>
        </a>

        <div class="nav-group">
          <div class="nav-group-header">
            <span class="nav-icon">üí¨</span>
            <span>Customer Service</span>
            <span class="nav-arrow">‚ñº</span>
          </div>
          <div class="nav-group-items">
            <a href="cs/library.html" class="nav-subitem">Th∆∞ vi·ªán h·ªçc t·∫≠p</a>
            <a href="cs/quiz.html" class="nav-subitem">B√†i ki·ªÉm tra</a>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-header">
            <span class="nav-icon">üì¢</span>
            <span>Marketing</span>
            <span class="nav-arrow">‚ñº</span>
          </div>
          <div class="nav-group-items">
            <a href="marketing/library.html" class="nav-subitem">Th∆∞ vi·ªán h·ªçc t·∫≠p</a>
            <a href="marketing/quiz.html" class="nav-subitem">B√†i ki·ªÉm tra</a>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-header">
            <span class="nav-icon">‚ö°</span>
            <span>Laser</span>
            <span class="nav-arrow">‚ñº</span>
          </div>
          <div class="nav-group-items">
            <a href="laser/guide.html" class="nav-subitem">H∆∞·ªõng d·∫´n kh·∫Øc Laser</a>
            <a href="laser/lightburn.html" class="nav-subitem">Th√¥ng s·ªë Lightburn</a>
          </div>
        </div>
      </nav>

      <div class="user-info"></div>

      <div class="sidebar-footer">
        <p>¬© 2025 Crush Room</p>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="breadcrumb">
        <a href="../index.html">Trang ch·ªß</a>
        <span>/</span>
        <span>Qu·∫£n l√Ω l·ªãch l√†m</span>
      </div>

      <header class="page-header">
        <h1>üß© Qu·∫£n l√Ω l·ªãch l√†m (Leader)</h1>
        <p class="header-subtitle">Xem ƒëƒÉng k√Ω ca linh ho·∫°t v√† ph√¢n ca theo gi·ªù cho team.</p>
      </header>

      <section class="content-section">
        <h2>1. Ch·ªçn tu·∫ßn & team</h2>
        <div style="display:flex; flex-wrap:wrap; gap:12px; align-items:center; margin-bottom:12px;">
          <div>
            <label for="week-start-admin">Tu·∫ßn b·∫Øt ƒë·∫ßu:</label><br />
            <input type="date" id="week-start-admin" />
          </div>
          <div>
            <label for="team-select-admin">Team:</label><br />
            <select id="team-select-admin">
              <option value="cs">Customer Service (CS)</option>
              <option value="mo">Marketing (MO)</option>
            </select>
          </div>
          <div style="margin-top:18px;">
            <button id="load-admin-btn" class="btn btn-secondary">T·∫£i d·ªØ li·ªáu</button>
          </div>
          <span id="admin-message" style="font-size:14px; margin-left:8px;"></span>
        </div>
        <p style="font-size:13px; color:#777;">
          √î trong b·∫£ng hi·ªÉn th·ªã: <strong>ƒê√£ ph√¢n / S·ªë ng∆∞·ªùi ƒëƒÉng k√Ω</strong>. Click v√†o 1 √¥ ƒë·ªÉ ch·ªçn ng∆∞·ªùi cho ca ƒë√≥.
        </p>
      </section>

      <section class="content-section">
        <h2>2. B·∫£ng ca theo gi·ªù</h2>
        <div style="overflow-x:auto;">
          <table class="data-table">
            <thead>
              <tr>
                <th>Gi·ªù / Ng√†y</th>
                <th>Th·ª© 2</th>
                <th>Th·ª© 3</th>
                <th>Th·ª© 4</th>
                <th>Th·ª© 5</th>
                <th>Th·ª© 6</th>
                <th>Th·ª© 7</th>
                <th>Ch·ªß nh·∫≠t</th>
              </tr>
            </thead>
            <tbody id="schedule-admin-body">
              <!-- JS render -->
            </tbody>
          </table>
        </div>
      </section>

      <section class="content-section" id="slot-editor-section">
        <h2>3. Chi ti·∫øt slot ƒëang ch·ªçn</h2>
        <div id="slot-editor-empty" style="font-size:14px; color:#777;">
          Click v√†o m·ªôt √¥ trong b·∫£ng ƒë·ªÉ xem v√† ch·ªçn nh√¢n vi√™n cho slot ƒë√≥.
        </div>
        <div id="slot-editor" style="display:none;">
          <p id="slot-title" style="font-weight:600; margin-bottom:8px;"></p>
          <div id="slot-available-users" style="margin-bottom:8px;"></div>
          <button id="slot-save-btn" class="btn btn-primary">L∆∞u slot n√†y</button>
        </div>
      </section>

      <section class="content-section">
        <h2>4. L∆∞u l·ªãch tu·∫ßn n√†y</h2>
        <button id="save-week-schedule-btn" class="btn btn-primary">
          üíæ L∆∞u l·ªãch l√†m cho tu·∫ßn n√†y
        </button>
        <span id="save-week-message" style="margin-left:8px; font-size:14px;"></span>
      </section>
    </main>
  </div>

  <script src="../js/auth.js"></script>
  <script src="../js/main.js"></script>
  <script src="../js/schedule-admin.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (!Auth.requireAuth()) return;
      const currentUser = Auth.getCurrentUser();
      // Ch·ªâ cho Admin d√πng trang n√†y
      if (!currentUser || currentUser.role !== 'admin') {
        Auth.renderAuthUI();
        if (Auth._showAccessDenied) Auth._showAccessDenied();
        return;
      }
      Auth.renderAuthUI();
      if (window.ScheduleAdminPage && typeof ScheduleAdminPage.init === 'function') {
        ScheduleAdminPage.init();
      }
    });
  </script>
</body>
</html>
